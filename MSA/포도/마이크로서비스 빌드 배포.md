# 마이크로서비스 빌드 배포

## 마이크로서비스 빌드 단위

마이크로서비스의 빌드 단위는 깃 저장소에 올라가 있는 자바 프로젝트 단위이다. 마이크로서비드 당 하나의 독립적 깃 주소가 할당되어 독립적 배포가 가능하다.



### 독립 프로젝트

부모 프로젝트가 빌드될 때 부모 프로젝트와 합쳐져서 하나의 패키징된 형태의 실행 파일이 만들어진다. 결국 결과물은 실행 가능한 묶음 파일(.jar, .war, 도커 이미지) 형태가 된다. 



### 복수 프로젝트

하나의 깃 주소를 가진 자바 프로젝트 하위에 다시 다수의 프로젝트를 가지는 구조이다.

독립 프로젝트에서의 자식 프로젝트와 구조는 같지만, 용도가 다르다. 독립 프로젝트에서 자식 프로젝트의 역할은 소스 활용 유형의 세부적인 분류이지만 복수 프로젝트의 자식 프로젝트는 독립적으로 배포할 수 있는 마이크로 서비스가 된다. 

복수 프로젝트에서 특정 자식 프로젝트 하나를 빌드하면 자신을 포함하고 있는 부모 프로젝트에 포함된 프로젝트도 빌드를 위해 같이 내려받게 된다. 즉, 동일 레벨에 있는 프로젝트의 소스도 모두 내려받는 것이다.

자식 프로젝트 단위로 개별적으로 빌드를 수행하여 실행 가능한 jar 파일 형태로 패키징할 수도 있고, 부모 프로젝트를 빌드하여 자식 프로젝트를 모두 포함한 war 형태의 파일로 패키징할 수도 있다.



## 마이크로서비스 배포 형태

### 실행 가능한 압축 파일

+ jar : 마이크로서비스 단위로 jar를 만들어서 배포하는 방식이다. 일반적으로 JVM이 설치된 OS 서버에서 java -jar <jar명> 형태의 명령어로 실행한다.
+ war : war 단위로 웹 애플리케이션 디렉터리에 베포하는 방식이다. 웹 애플리케이션 디렉터리에 war를 배치하면 웹 애플리케이션 서버가 자동으로 인지하여 실행한다.



### 도커 이미지

이미지 형태로 마이크로서비스를 생성해 두면 필요한 시점에 컨테이너로 생성하여 실행할 수 있다.