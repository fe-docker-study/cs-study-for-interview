# 2. 개략적인 규모 추정
시스템 설계 시 요구되는 '개략적인 규모 추정'은 어떤 설계가 요구사항에 부합하는지 보기 위해 `성능 수치상 추정치`를 계산하는 행위이다.

## 2의 제곱 수
일단 시스템에서 다루는 **데이터 양** 알아낼 때 쓰는데 이를 2의 제곱 수로 표현하면 어떻게 되는지 알아야한다.
![image](https://user-images.githubusercontent.com/31172248/179473817-21c34901-dcae-406c-9c0a-8dc0918defa4.png)

## 응답 지연 값
컴퓨터 연산들의 처리 속도가 어느 정도인지 짐작할 수 있도록 해준다.
![image](https://user-images.githubusercontent.com/31172248/179473929-a73e92ee-e473-4bd5-ad2d-a5cb19e28be3.png)

### 여기서 알 수 있는 점
* 메모리는 빠르지만 디스크는 느리다.
* 디스크 탐색(seek)은 가능한 한 피해라
* 단순 압축 알고리즘은 빠르다
* 데이터를 인터넷으로 전송하기 전 가능한 한 압축할 것
* DC는 보통 여러 Region에 분산되어있고 센터들 간 데이터 전송에는 시간이 걸린다.


## 가용성에 관련된 수치들
**고가용성**은 시스템이 오랜 시간 동안 지속적으로 중단 없이 지속될 수 있는 능력을 칭한다.(percent로 표기) SLA(Service Level Agreement)는 서비스 사업자와 고객 사이에 맺어진 합의를 의미하는데 여기에는 가용시간도 포함되어 보통 공식적으로 업체에서 기술해 놓는다.

## 💡 예제 : 트위터 QPS와 저장소 요구량 추정
### 가정
* **월간 능동 사용자** : 3억명
* **50%** 의 사용자가 트위터 매일 사용
* 평균적으로 각 사용자당 **2건**의 트윗 올림
* 미디어 포함 트윗은 **10%** 정도
* 데이터는 5년 간 보관한다.

### 추정
**1. QPS 추정치**
1) 일간 능동 사용자 = 3억 x 50% = 1.5억
2) QPS = 1.5억 x 2 트윗 / 24시간 / 3600초 = 약 3500
3) 최대 QPS(Peek QPS) = 2QPS = 약 7000

**2. 미디어 저장을 위한 저장소 요구량**
1) 평균 트윗 크기
    * tweet_id : 64byte
    * text : 140byte
    * media : 1MB
2) 미디어 저장소 요구량 = 1.5억 x 2 x 10% x 1MB = 30TB/일
3) 5년 간의 미디어 보관 저장소 요구량 = 30TB x 365 x 5 = 약 55PB

## conclude
`단골 추정 문제`는 QPS, PeekQPS, 저장소 요구량, 캐시 요구량, 서버 수 등을 구하라는 문제다. 
> tip) 근사치를 이용하면 빠른 계산이 가능하다. ex) 99987/9.1 = 약 100,000/10
