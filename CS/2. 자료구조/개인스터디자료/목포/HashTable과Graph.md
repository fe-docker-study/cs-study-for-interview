# HashTable

## HashTable이란

`(Key,Value)로 데이터를 저장하는 자료구조`로 데이터를 빠르게 검색할 수 있다.
해시테이블이 빠른 검색 속도를 가지고 있는 이뉴는 내부적으로 배열(버킷)을 사용하여 데이터를 저장하기 때문이다. 각 Key에 해시함수를 적용해 배열의 고유한 index를 생성하고(이 과정에서 hash로 변경 됨), 해시는 값(Value)와 매칭되어 저장소에 저장된다. 이렇게 만들어진 index를 활용해 값을 저장하거나 검색을 하게된다. 여기서 실제 값이 저장되는 장소를 버킷 또는 슬롯이라고 한다.

- Key : 고유한 값으로, 해시 함수의 input이 된다. 다양한 길이의 값이 될 수 있다. 이 상태로 최종 저장소에 저장되면 다양한 길이 만큼의 저장소를 구성해 두어야하기 때문에 해시 함수로 값을 바꾸어 저장이 되어야 공간의 효율성을 추구할 수 있다.

- Hash Function : Key를 Hash로 바꿔주는 역할을 한다. 서로 다른 키가 같은 hash가 되는 경우 해시 충돌이 일어날 수 있는데 이같은 경우가 일어나는 확률을 최대한 줄이는 함수를 만드는 것이 중요하다.

- Hash : 해시 함수의 결과물이며, 저장소에서 값과 매칭되어 저장된다.

- Value : 저장소(bucket, slot)에 저장되는 값으로 키와 매칭되어 저장, 삭제, 검색, 접근이 가능하다.

- Bucket : 하나의 주소를 갖는 파일의 한 구역을 의미하며, 버킷의 크기는 같은 주소에 포함될 수 있는 레코드 수를 의미한다.

- Slot : 한 개의 레코드를 저장할 수 있는 공간으로 n개의 슬롯이 모여 하나의 버킷을 형성한다.

![](https://media.geeksforgeeks.org/wp-content/uploads/Linear-Probing-1-1.jpg)

### 저장(Insertion)

해시테이블에서 자료를 저장하기 위해서는 Hash Function으로 Key를 해시로 변경해야한다.
위 그림처럼 input key를 7로 나눈 나머지를 출력했을 떄 key는 76 해시는 6이 된다.
그리고 미리 준비해놓은 0~6의 저장소(bucket, slot) 중 알맞은 해시 값을 찾아 value를 저장한다.
해시 함수로 해시를 산출하는 과정에서 서로 다른 key가 같은 hash로 변경되는 문제가 발생할 수 있는데, 이는 key와 value가 1:1로 매칭되어야한다는 규칙을 위배한 것으로 이 문제를 해결하면서 저장되어야한다. 이는 `해시 충돌`이라고 한다.

## 해시 충돌

해시 테이블은 저장, 삭제, 검색 과정이 평균적으로 O(1)의 시간복잡도를 가지고 있기 때문에 자료구조 효율성 측에서 매우 우수하다고 볼 수 있다.  
하지만, 위에서 기술했듯이 무한한 값(key)을 유한한 값(hash)로 표현하면서 서로 다른 두 개 이상의 유한한 값이 동일한 출력 값을 가지게 될 수 있다.
Hash table은 이 같은 충돌이 일어날 확률을 적게 나오도록 만들어야한다.

![](https://baeharam.netlify.app/media/ds/hash4.png)

### Chaining

충돌이 발생했을 때 이를 동일한 버킷에 저장하는데 이를 연결리스트 형태로 저장하는 방법을 말한다. 위 그림에서 `Jhon Smith`와 `Sandara Dee`의 인덱스가 152로 충돌하는 것을 볼 수 있다. 이 경우 Sandra Dee를 John Smith 뒤에 연결함으로써 충돌을 처리할 수 있다.

### Open Addressing

해시 함수로 얻은 해시값에 따라 데이터와 키 값을 저장하지만 동일한 주소에 다른 데이터가 있을 경우 다른 주소도 이용할 수 있게 하는 기법이다.
![](https://baeharam.netlify.app/media/ds/hash5.png)
이 전 예제와 똑같이 152번 주소에서 충돌할 경우 그 다음 비어있는 주소인 153에 저장하는 것을 볼 수 있다.


## HashMap과 HashTable의 차이
그렇다면 똑같이 Key, Value 형태로 저장하는 HashMap과의 차이는 무엇일까?  
* Thread-safe 여부
    * Hashtable은 Thread-safe 하고, HashMap은 Thread-safe하지 않다. 그래서 멀티스레드 환경이 아니라면 Hashtable은 HashMap보다 성능이 떨어진다는 단점을 가지고있다. 
    
* Null 값 허용 여부
    * 


### 활용 예
* 보안 분야에 사용
* 메세지 인증코드 (MAC) 