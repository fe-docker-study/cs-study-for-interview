# Heap

### Heapì€

- complete binary tree ì´ë©´ì„œ
- heap propertyë¥¼ ë§Œì¡±í•´ì•¼í•œë‹¤.

### Full binary treeì™€ Complete binary treeì˜ ë¹„êµ

![image](https://user-images.githubusercontent.com/47748246/142373384-e17945f7-d073-40e6-9564-fcfdb4622fdf.png)


### heap property

- Max heap : ë¶€ëª¨ ë…¸ë“œëŠ” í•­ìƒ ìì‹ ë…¸ë“œë³´ë‹¤ í¬ë‹¤.
- Min heap : ë¶€ëª¨ ë…¸ë“œëŠ” í•­ìƒ ìì‹ ë…¸ë“œë³´ë‹¤ ì‘ë‹¤.
- heapì€ ìœ ì¼í•˜ì§€ ì•Šë‹¤. ì¦‰, ë™ì¼í•œ ë°ì´í„°ì— ëŒ€í•´ ì—¬ëŸ¬ í™ì´ ì¡´ì¬ í•  ìˆ˜ ìˆë‹¤.
    
![image](https://user-images.githubusercontent.com/47748246/142373423-a8a6611c-a72b-4094-b0e0-8b4ef97cd0c4.png)
    

### Heapì˜ í‘œí˜„

- í™ì€ ì¼ì°¨ì› ë°°ì—´ë¡œ í‘œí˜„ ê°€ëŠ¥í•˜ë‹¤.
    - ë£¨íŠ¸ ë…¸ë“œ : A[1]
    - A[i]ì˜ ë¶€ëª¨ = A[i/2]
    - A[i]ì˜ ì™¼ìª½ ìì‹ = A[2*i]
    - A[i]ì˜ ì˜¤ë¥¸ìª½ ìì‹ = A[2*i +1]

![image](https://user-images.githubusercontent.com/47748246/142373451-2440399e-1b88-4cf5-a99f-e6be890c4b46.png)

### MAX-HEAPIFY êµ¬í˜„

![image](https://user-images.githubusercontent.com/47748246/142373480-5e3e3fc0-8f8c-4108-ba25-0d2c63517856.png)

```java
class MaxHeap{
  private ArrayList<Integer> heap;

  public MaxHeap() {
      heap = new ArrayList<Integer>();
      heap.add(0); //ì²«ë²ˆì§¸ ì¸ë±ìŠ¤ëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
  }

  //ì‚½ì…
  public void insert(int val) {
      //ë§¨ ë§ˆì§€ë§‰ ìœ„ì¹˜ì— ì‚½ì…
      heap.add(val);

      int  p = heap.size()-1; //ìƒˆë¡œ ë„£ì€ ë…¸ë“œì˜ ì¸ë±ìŠ¤ ìœ„ì¹˜ ì •ë³´
      //ë£¨íŠ¸ê¹Œì§€ ì´ë™ ìì‹ì´ ë” í¬ë©´ êµí™˜
      while(p>1 && heap.get(p)> heap.get(p/2)) {
          int tmp = heap.get(p/2);
          heap.set(p/2, heap.get(p));
          heap.set(p, tmp);

          p /= 2;
      }
  }
  //ì‚­ì œ
  public int delete() {
      //í™ ì´ ë¹„ì–´ìˆìœ¼ë©´ 0ë¦¬í„´
      if(heap.size()-1 < 1) {
          return 0;
      }

      //ì‚­ì œí•  ë£¨íŠ¸ ë…¸ë“œ ê°’ ì €ì¥
      int deleteitem = heap.get(1);

      //ë§¨ ë§ˆì§€ë§‰ ìì‹ ë£¨íŠ¸ì— ë„£ê³  ë§ˆì§€ë§‰ ê°’ ì‚­ì œ
      heap.set(1,heap.get(heap.size()-1));
      heap.remove(heap.size()-1);

      //ë£¨íŠ¸ì— ìƒˆë¡œ ë„£ì€ ë…¸ë“œì˜ ì¸ë±ìŠ¤ ì •ë³´
      int pos = 1;
      while((pos*2)<heap.size()) {

          int max = heap.get(pos*2);
          int maxPos = pos*2;

          //ì˜¤ë¥¸ìª½ ìì‹ì´ ì¡´ì¬í•˜ê³  ì˜¤ë¥¸ìª½ ìì‹ì´ ì™¼ìª½ ìì‹ë³´ë‹¤ í´ë•Œ ë°”ê¿€ ìì‹ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì„¤ì •
          if((pos*2 +1)<heap.size() && max < heap.get(pos*2+1)) {
              max = heap.get(pos*2+1);
              maxPos = pos*2+1;
          }

          //ë¶€ëª¨ê°€ ë” í¬ë©´ ë
          if(heap.get(pos) > max){
              break;
          }

          //ìì‹ì´ ë” í¬ë©´ êµí™˜
          int tmp = heap.get(pos);
          heap.set(pos, max);
          heap.set(maxPos, tmp);
          pos = maxPos;
      }
      return deleteitem;
  }
}
```

# ì´ì§„ ê²€ìƒ‰ íŠ¸ë¦¬

### Dynamic Set

- ì—¬ëŸ¬ ê°œì˜ keyë¥¼ ì €ì¥
- insert, search, deleteì™€ ê°™ì€ ì—°ì‚°ë“¤ì„ ì§€ì›í•œë‹¤.

### ê²€ìƒ‰ íŠ¸ë¦¬

- Dynamic Setì„ íŠ¸ë¦¬ì˜ í˜•íƒœë¡œ êµ¬í˜„
- ì¼ë°˜ì ìœ¼ë¡œ search, insert, delete ì—°ì‚°ì´ íŠ¸ë¦¬ì˜ ë†’ì´ì— ë¹„ë¡€í•˜ëŠ” ì‹œê°„ë³µì¡ë„ë¥¼ ê°€ì§
- ì´ì§„ê²€ìƒ‰íŠ¸ë¦¬, ë ˆë“œë¸”ë™íŠ¸ë¦¬, B-íŠ¸ë¦¬ ë“±

### ì´ì§„ ê²€ìƒ‰ íŠ¸ë¦¬

- ì´ì§„ íŠ¸ë¦¬
- ê° ë…¸ë“œì— í•˜ë‚˜ì˜ í‚¤ë¥¼ ì €ì¥
- ê° ë…¸ë“œ vì— ëŒ€í•´ì„œ ê·¸ ë…¸ë“œì˜ ì™¼ìª½ subtreeì— ìˆëŠ” í‚¤ë“¤ì€ ëª¨ë‘ key[v]ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ê³ , ì˜¤ë¥¸ìª½ subtreeì— ìˆëŠ” ê°’ì€ í¬ê±°ë‚˜ ê°™ë‹¤.

1) search

```java
// ì´ì§„ ê²€ìƒ‰ íŠ¸ë¦¬ì—ì„œ kë¥¼ ê°’ìœ¼ë¡œ ê°–ëŠ” ë…¸ë“œì˜ ì¸ë±ìŠ¤ë¥¼ êµ¬í•˜ê³ ì í•œë‹¤. 
// xëŠ” í˜„ì¬ ë…¸ë“œ , këŠ” ì°¾ìœ¼ë ¤ëŠ” ê°’
Tree-Search(x, k){
	if x=null or k=key[x] 
		then return x

	if k < key[x]
		then return Tree-Search(left[x], k)
		else return Tree-Search(right[x], k)
}
```

- ì‹œê°„ ë³µì¡ë„ = O(h) (h : íŠ¸ë¦¬ì˜ ë†’ì´)

- ìµœì†Œê°’
    - ìµœì†Œ ê°’ì€ í•­ìƒ ê°€ì¥ ì™¼ìª½ ë…¸ë“œì— ì¡´ì¬
    - ì‹œê°„ ë³µì¡ë„ = O(h)
    
    ```java
    Tree-minimum(x){
    	while(left[x] != null){
    		x = left[x]
    	}
    	return x
    }
    ```
    

- ìµœëŒ€ê°’
    - ìµœëŒ€ê°’ì€ í•­ìƒ ê°€ì¥ ì˜¤ë¥¸ìª½ ë…¸ë“œì— ì¡´ì¬
    - ì‹œê°„ ë³µì¡ë„ = O(h)
    
    ```java
    Tree-maximum(x){
    	while(right[x] != null){
    		x = right[x]
    	}
    	return x
    }
    ```
    

2) insert  

- ê²€ìƒ‰í• ë•Œì™€ ê°™ì´ ë£¨íŠ¸ë…¸ë“œë¶€í„° ì°¨ë¡€ë¡œ ë¹„êµí•˜ë©°, íŠ¸ë¦¬ì˜ ê°€ì¥ ë¦¬í”„ ë…¸íŠ¸ì— ìƒˆë¡œìš´ ë…¸ë“œë¥¼ ì¶”ê°€

![image](https://user-images.githubusercontent.com/47748246/142373523-13736056-a4f0-44a0-8996-ae4a3da7721a.png)

3) delete

i) ìì‹ ë…¸ë“œê°€ ì—†ëŠ” ê²½ìš° â†’ ê·¸ëƒ¥ ì‚­ì œ
![image](https://user-images.githubusercontent.com/47748246/142373561-abcfc3a5-c594-44db-b024-c002aa84214e.png)

ii) ìì‹ ë…¸ë“œê°€ 1ê°œì¸ ê²½ìš°
![image](https://user-images.githubusercontent.com/47748246/142373593-f7fd973e-3ecc-4dd0-b767-56df22487bf9.png)

iii) ìì‹ ë…¸ë“œê°€ 2ê°œì¸ ê²½ìš°

![image](https://user-images.githubusercontent.com/47748246/142373636-8a88372b-114e-4482-ad86-8246af7ea1ab.png)

<aside>
ğŸ“– Successor
- ë…¸ë“œ xì˜ successorë€ key[x]ë³´ë‹¤ í¬ë©´ì„œ ê°€ì¥ ì‘ì€ í‚¤ë¥¼ ê°€ì§„ ë…¸ë“œë¥¼ ë§í•œë‹¤. 
ì˜ˆë¥¼ë“¤ì–´ ë…¸ë“œ xì˜ successorë¥¼ êµ¬í• ë•Œ
i) ë…¸ë“œ xì˜ ì˜¤ë¥¸ìª½ subtreeê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°, ì˜¤ë¥¸ìª½ subtreeì˜ ìµœì†Œê°’ì´ successorê°€ ëœë‹¤.
ii) ì˜¤ë¥¸ìª½ subtreeê°€ ì—†ëŠ” ê²½ìš°, ë¶€ëª¨ë¥¼ ë”°ë¼ ë£¨íŠ¸ê¹Œì§€ ì˜¬ë¼ê°€ë©´ì„œ ì²˜ìŒìœ¼ë¡œ ëˆ„êµ°ê°€ì˜ ì™¼ìª½ ìì‹ì´ ë˜ëŠ” ë…¸ë“œê°€ successorê°€ ëœë‹¤ .
iii) ê·¸ëŸ° ë…¸ë“œê°€ ì—†ì„ ê²½ìš°, successorê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ì¦‰, xê°€ ìµœëŒ€ê°’ì´ ëœë‹¤.

</aside>

![image](https://user-images.githubusercontent.com/47748246/142373671-ccb47074-c647-471f-829b-c137137a54ea.png)

# ë ˆë“œë¸”ë™ íŠ¸ë¦¬

- ì´ì§„ íƒìƒ‰ íŠ¸ë¦¬ì˜ ì¼ì¢…
- ê· í˜• ì¡íŒ íŠ¸ë¦¬ : O($log_2n)$
- ë ˆë“œë¸”ë™íŠ¸ë¦¬ëŠ” ìë£Œì˜ ì‚½ì…ê³¼ ì‚­ì œ, ê²€ìƒ‰ì—ì„œ ìµœì•…ì˜ ê²½ìš°ì—ë„ ì¼ì •í•œ ì‹¤í–‰ ì‹œê°„(O($log_2n$))ì„ ë³´ì¥í•œë‹¤.

### íŠ¹ì„±

1. ë…¸ë“œëŠ” ë ˆë“œ í˜¹ì€ ë¸”ë™ ì¤‘ì˜ í•˜ë‚˜ì´ë‹¤.
2. ë£¨íŠ¸ ë…¸ë“œëŠ” ë¸”ë™ì´ë‹¤.
3. ëª¨ë“  ë¦¬í”„ ë…¸ë“œë“¤(NIL)ì€ ë¸”ë™ì´ë‹¤.
4. ë ˆë“œ ë…¸ë“œì˜ ìì‹ë…¸ë“œ ì–‘ìª½ì€ ì–¸ì œë‚˜ ëª¨ë‘ ë¸”ë™ì´ë‹¤. (ì¦‰, ë ˆë“œ ë…¸ë“œëŠ” ì—°ë‹¬ì•„ ë‚˜íƒ€ë‚  ìˆ˜ ì—†ìœ¼ë©°, ë¸”ë™ ë…¸ë“œë§Œì´ ë ˆë“œ ë…¸ë“œì˜ ë¶€ëª¨ ë…¸ë“œê°€ ë  ìˆ˜ ìˆë‹¤)
5. ì–´ë–¤ ë…¸ë“œë¡œë¶€í„° ì‹œì‘ë˜ì–´ ê·¸ì— ì†í•œ í•˜ìœ„ ë¦¬í”„ ë…¸ë“œì— ë„ë‹¬í•˜ëŠ” ëª¨ë“  ê²½ë¡œì—ëŠ” ë¦¬í”„ ë…¸ë“œë¥¼ ì œì™¸í•˜ë©´ ëª¨ë‘ ê°™ì€ ê°œìˆ˜ì˜ ë¸”ë™ ë…¸ë“œê°€ ìˆë‹¤.

ìœ„ ì¡°ê±´ë“¤ì„ ë§Œì¡±í•˜ê²Œ ë˜ë©´, ë ˆë“œ-ë¸”ë™ íŠ¸ë¦¬ëŠ” ê°€ì¥ ì¤‘ìš”í•œ íŠ¹ì„±ì„ ë‚˜íƒ€ë‚´ê²Œ ëœë‹¤
