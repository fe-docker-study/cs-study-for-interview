# 프로토콜과 표준

## 프로토콜이란?

프로토콜이란 서로 다른 시스템에 있는 `개체`(브라우저, 전자우편, 소프트웨어, 데이터베이스 등)의 통신을 원활하게 위해 만든 통신규약이다. 만약 프로토콜의 정의가 없었다면 네트워크는 연결되지 않았을 것이다. 서로 간의 자유롭고 효율적인 통신을 위해서는 통일된 프로토콜의 표준화가 필요하다.

### 국제 표준화 기구

1. ISO (International Standards Organization)
   국제 표준화기구, 네트워크 통신구조를 정의하는 OSI 계층 모델을 개발하여 네트워크의 표준화를 이루었다.
2. IEEE(Institute of Electrical and Electronics Engineers)
   미국전지전자기술협회, LAN의 표준을 규정하였음.
3. ANSI(American National Standards Institute)
   미국표준협회, ISO의 회원으로 전기, 전자, 컴퓨터, 정보처리 등 주로 표준화

## 프로토콜의 계층

위에서 말한 객체들끼리의 통신을 위해서 여러 프로토콜이 존재한다. 이 부분에서는 계층보단 각 계층의 프로토콜을 눈여겨보자.
![image](https://user-images.githubusercontent.com/31172248/143675379-0d7b5ef0-935f-4182-9316-38cfe929ebef.png)
![image](https://t1.daumcdn.net/cfile/tistory/213F623C566BAE253B)

### TCP/IP 4계층(5계층)

TCP/IP는 현재의 인터넷에서 컴퓨터들이 서로 정보를 주고받는데 쓰이는 통신규약의 모음이다. 실제 대다수 프로그램은 TCP와 IP로 통신하고 있다. 실제 인터넷 사용 시의 인터넷 표준이라고 생각하면 된다.

- 1계층 (네트워크 인터페이스 계층)
  Node to Node 간의 신뢰성있는 `데이터 전송을 담당`하는 계층이다. 라우터가 최적의 링크를 찾아 경로를 고르면, 그 경로를 통해 데이터그램이 움직이게 된다. **MAC 주소**가 이 계층에서 사용된다.

- 2계층 (인터넷 계층)
  OSI 7계층에서 네트워크 계층에 해당한다. 통신 노드 간의 IP패킷을 전송하는 기능과 라우팅 기능을 담당한다. 프로토콜에는 IP, ARP, RARP 등이 있다.

      - IP(Internet Protocol) : 비신뢰성, 비연결지향 데이터그램 프로토콜이다.
      - ARP(Address Resolution Protocol) : 주소 변환 프로토콜이다. IP주소를 MAC주소로 변환하는 프로토콜이다.
      - RARP(Reserve ARP) : 반대로 MAC 주소로 IP주소를 찾는 프로토콜이다.
      - ICMP(Internet Control Message Protocol) : 상태 진단 메세지 프로토콜이다. 이 프로토콜을 이용하는 대표적인 프로그램이 ping이다.
      - IGMP(Internet Group Message Protocol) : 멀티캐스트용 프로토콜이다.

- 3계층 (전송 계층)
  OSI 7계층의 전송 계층에 해당한다. 통신 노드 간의 연결을 제어하고, 신뢰성 있는 데이터 전송을 담당한다. 프로토콜에는 TCP, UDP가 있다.

      - TCP(Transmission Control Protocol) : 신뢰성 있는 연결지향형 프로토콜이다. 신뢰성있다는 말은 그 패킷에 대한 오류처리나 재전송따위로 에러를 복구하는 것을 말한다. 그 때문에 TCP의 헤더에 붙는 정보가 많다.
      - UDP(User Datagram Protocol) : 비신뢰성 비연결형 프로토콜티다. 패킷을 잃거나 오류가 있어도 대처하지 않는 것을 말한다. 따라서 UDP 헤더는 간단한 구조를 갖고있다.

- 4계층 (응용 계층)
  OSI 7계층의 세션, 표현, 응용 계층에 해당한다. TCP/UDP 기반의 응용 프로그램을 구현할 때 사용한다. 프로토콜에는 FTP, HTTP, SSH 등이 있다.

      - HTTP(Hyper-Text Transfer Protocol) : TCP 기반의 프로토콜로 포트 번호 80번을 사용한다.
      - Telnet : TCP 포트번호 23번을 사용한다. 원격 터미널을 접속할 때 이 프로토콜을 사용한다.
      - SSH(Secure Shell) : 텔넷과 같은 서비스는 보안에 취약하다. 비밀번호가 암호화되지 않아 그대로 노출이 되기 때문이다. 이것을 보완한 것이 SSH입니다. 포트번호 22번을 사용한다.
      - FTP(File Transfer Protocol) : 파일 전송 프로토콜이다. 파일을 받거나 올릴 때 FTP를 사용한다. FTP는 파일을 올리거나 내려받을 때 신뢰성을 중요시하기 때문에 TCP에서 동작하고 2개의 포트를 사용한다.
      - SMTP(Simple Mail Transfer Protocol) : 메일 전송 프로토콜이다. TCP 상에서 동작하며 포트는 25번을 사용한다.
      - POP3(Post Office Protocol Version3) : 메일 수신용 프로토콜이다. 아웃룩같은 프로그램이 POP3라는 프로토콜을 사용하여 동작한다.  TCP 포트 110을 사용한다.
      - DNS(Domain Name System) : 도메인명에 대한 호스트 정보를 제공해준다. 기본적으로 UDP 상에서 동작한다. 기본적으로 실패하면 다시 한 번 요청하며 신뢰성을 요할 경우에는 TCP 상에서도 동작한다. 데이터의 길이가 길 경우에는 TCp 기반으로 동작할 수 있다. UDP, TCP 포트 53번을 사용한다.

위와 같이 포트번호가 특정 프로토콜이 사용해서 우리가 쓸 수 없는 포트들이 있다. 이런 포트들을 well-known port라고 한다.

### OSI 7계층

ISO에서 표준화한 시스템 계층이다. 네트워크 전송 시의 데이터 표준을 정리한 것이라 볼 수 있다.

- **1계층** - 물리계층(Physical Layer)  
   전기적, 기계적, 기능적인 특성을 이용해 통신 장비로 데이터를 전송한다.
  물리 계층에서 사용되는 통신단위는 bit로 1과 0으로 나타낸다.
  물리 게층에서는 단지 데이터만 전달한다. 전송할 때(또는 받을 때) 데이터가 무엇인지, 어떤 에러가 있는지 등에는 전혀 신경쓰지 않는다. 정말 단순하게 데이터를 전기적인 신호로 변환해서 주고받는 기능만 할 뿐이다.

  - PDU(Protocol Data Unit) : Bit
  - 프로토콜 : Modem, Cable, Fiber, RS-232C
  - 대표장비 : 허브, 리피터

- **2계층** - 링크 계층(Link Layer)  
   링크 계층은 `네트워크 기기들 사이의 데이터를 전송하는 역할`을 한다.
  물리 계층을 통해 송수신되는 정보의 오류와 흐름을 관리하여 안전한 정보의 전달을 수행할 수 있도록 도와주는 역할을 한다.
  링크 계층에서는 프레임에 주소값을 물리적으로 할당받는데 이는 맥 주소라고 불린다.  
   결론 : 링크 계층은 에러검출/재전송/흐름제어 역할을 한다.

  - PDU : Frame
  - 프로토콜 : Ethernet, MAC, PPP, ATM, LAN, Wifi
  - 대표장비 : 브릿지, 스위치

- **3계층** : 네트워크 계층(Network Layer)  
   네트워크 계층은 네트워크에서 아주 중요하다. 중요한 기능 중 하나는 라우팅이다. 이는 데이터를 목적지까지 안전하고 빠르게 전달하는 기능을 말한다. 경로를 선택하고 주소를 정하고 경로에따라 패킷을 전달해주는 것이 네트워크 계층의 역할이다. 네트워크 계층은 사용되는 프로토콜 종류도 다양하고 라우팅하는 기술도 다양하다. 또한 어느 컴퓨터에게 데이터를 전송할지 주소를 가지고있어서 이를 바탕으로 통신한다.
  우리가 아는 IP주소가 바로 네트워크 계층의 헤더에 있다.  
   결론 : `네트워크 계층은 주소부여(IP)/경로 설정(Route) 역할`을 한다.

  - PDU : Packet
  - 프로토콜 : IP, ICMP 등
  - 대표장비 : 라우터, L3 스위치

- **4계층** : 전송 게층(Transport Layer)  
   전송 계층은 `통신을 활성화하기 위한 계층`이다. 양 끝단의 사용자들이 신뢰성있는 데이터를 주고 받게 해주는 역할을 한다.
  보통 TCP 프로토콜을 이용하며, 포트를 열어서 응용프로그램이 전송을 할 수 있게한다. 중요한 것은 데이터 전송을 위해 Port 번호가 사용된다는 점이다. 대표적인 프로토콜로 TCP와 UDP가 있다. 이 계층에서 사용하는데 사용하는 데이터 단위는 세그먼트이다.  
   결론 : 전송계층은 패킷생성 및 전송 역할을 한다.

  - PDU : 세그먼트
  - 프로토콜 : TCP, UDP, ARP, RTP
  - 대표장비 : 게이트웨이, L4 스위치

- **5계층** : 세션 계층(Session Layer)  
   `통신 세션을 구성하는 계층`으로, 포트번호를 기반으로 연결한다. 통신장치 간의 상호작용을 설정하고 유지하며 동기화한다. (세션이란 데이터가 통신하기 위한 논리적인 연결을 말함)
  세션 계층은 TCP/IP 세션을 만들고 없애는 책임을 진다.  
   결론 : 세션 계층은 통신을 하기 위한 세션을 확립/유지/중단 역할을 한다.(운영체제가 해줌)

  - PDU : Data
  - 프로토콜 : NetBIOS, SSH, TLS

- **6계층** : 표현 계층(Presentation Layer)  
   표현 계층은 코드 간의 번역을 담당하여 사용자 시스템에서 데이터 형식상 차이를 다루는 부담을 응용 계층으로분터 덜어준다.
  MIME 인코딩이나 암호화 등의 동작이 표현 계층에서 이루어지는 것이다.
  예를들면, EBCDIC로 인코딩 된 문서 파일을 ASCII로 인코딩 된 파일로 바꿔주는 것. 해당 데이터가 txt인지, 그림인지, gif인지, jpg인지의 구분 등이 표현 계층의 몫이다.  
   결론 : 표현 계층은 `사용자의 명령어를 완성 및 결과 표현하여, 압축/암호화 역할`을 한다.

  - PDU : Data
  - 프로토콜 : JPG, MPEG, SMB, AFP

- **7계층** : 응용 계층(Application Layer)  
   응용 계층은 사용자와 바로 연결되어있으며 `응용 SW를 도와주는 계층`이다. 사용자로부터 정보를 입력받아 하위 계층으로 전달하고 하위 계층에서 전송한 데이터를 사용자에게 전달한다. 파일 전송, DB, 메일 전송 등 여러가지 응용 서비스를 네트워크에 연결해주는 역할을 한다.

  - PDU : Data
  - 프로토콜 : DHCP, DNS, FTP, HTTP
